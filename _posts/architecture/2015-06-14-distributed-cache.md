---
layout: post
title: "一种基于哨兵的分布式cache"
description: ""
category: architecture
subhead: ''
tags: [cache, 分布式, 架构]

---

### 场景介绍：

	大促活动下，对于某些产品进行整点秒杀活动。预计流量是平时峰值5倍。
	商品计算逻辑比较复杂：某个最终展示的商品属性和价格，可能需要上亿次动态条件计算获得，动态条件每时每刻都在变化，并且商品的库存属性属于行业共有库存，每时每刻都在变化。
 

### 头脑风暴
	针对这种场景，有很多方案可以尝试，不过总结起来，大概俩个放心：扩容和缓存。
	
#### 扩容
	扩容是最容易想到的方式，而且每年大促，根据压测和运营活动预期，都可能有相应扩容。扩容从某种程度上说，也是最简单的方式，如果应用规划足够好，没有状态，那么基本不用开发介入就能完成。但是如果应用涉及状态信息，那么扩容就没有说的那么轻巧，扩容涉及到增加集群状态；活动结束后，机器下线涉及集群减少状态，这一增一减，增加了运维的成本和系统稳定性。
	扩容还有一个不好的地方就是活动结束后，系统水位下降，闲下来4倍的机器，比较浪费。
	
#### 缓存
	相对扩容，缓存是一种从应用角度出发，优化系统的方案。缓存的方案可细分不同粒度，适用不同场景。
	
##### 静态化
			
	
		 



